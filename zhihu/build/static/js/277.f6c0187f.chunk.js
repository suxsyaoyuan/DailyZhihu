"use strict";(self.webpackChunkzhihu=self.webpackChunkzhihu||[]).push([[277],{3762:function(e,n,r){r.d(n,{Z:function(){return o}});var t=r(4165),a=r(5861),i=r(9439),s=r(1413),c=r(7313),u=r(4763),l=r(6417);function o(e){var n=(0,s.Z)({},e),r=n.children,o=n.onClick;delete n.children;var d=(0,c.useState)(!1),p=(0,i.Z)(d,2),h=p[0],f=p[1],m=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"===typeof o){e.next=2;break}return e.abrupt("return");case 2:return f(!0),e.prev=3,e.next=6,o();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:f(!1);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}();return o&&(n.onClick=m),(0,l.jsx)(u.zx,(0,s.Z)((0,s.Z)({},n),{},{loading:h,children:r}))}},631:function(e,n,r){var t,a=r(168),i=(r(7313),r(4763)),s=r(244),c=r(8467),u=r(2135),l=r(6417),o=s.ZP.div(t||(t=(0,a.Z)(["\n  .navbar-again-box {\n    padding: 0 0.26667rem;\n    height: 1.06667rem;\n    .adm-nav-bar-title {\n      font-size: 0.42667rem;\n    }\n    .adm-nav-bar-back-arrow {\n      font-size: 0.48rem;\n    }\n  }\n"]))),d=function(e){var n=e.title,r=(0,c.s0)(),t=(0,u.lr)()[0];return(0,l.jsx)(o,{children:(0,l.jsx)(i.l2,{className:"navbar-again-box",onBack:function(){var e=t.get("to"),n=t.get("lx");/^\/detail\//.test(e)?r(e,{replace:!0}):"/personal"!==e||"singout"!==n?r(-1):r("/",{replace:!0})},children:n})})};d.defaultProps={title:"\u4e2a\u4eba\u4e2d\u5fc3"},n.Z=d},4277:function(e,n,r){r.r(n);var t,a=r(4165),i=r(5861),s=r(9439),c=r(168),u=r(7313),l=r(4252),o=r(244),d=r(4763),p=r(631),h=r(6135),f=r(6928),m=r(2321),v=r(3762),x=r(6417),b=o.ZP.div(t||(t=(0,c.Z)(["\n  .formBox {\n    padding: 0.4rem;\n    .item {\n      display: flex;\n      align-items: center;\n      margin-bottom: 0.26667rem;\n      height: 1.46667rem;\n      line-height: 1.46667rem;\n      font-size: 0.37333rem;\n      &:nth-child(1) {\n        height: 2.13333rem;\n        line-height: 2.13333rem;\n      }\n      .label {\n        width: 20%;\n        text-align: center;\n      }\n      .input {\n        width: 80%;\n      }\n    }\n    .adm-space-item {\n      padding-bottom: 0;\n    }\n  }\n\n  .submit {\n    display: block;\n    margin: 0 auto;\n    width: 60%;\n    height: 0.93333rem;\n    font-size: 0.37333rem;\n  }\n"])));n.default=(0,h.$j)((function(e){return e.base}),f.Z.base)((function(e){var n=e.profile,r=e.queryLoginInfo,t=e.navigate,c=(0,u.useState)([{url:n.pic}]),o=(0,s.Z)(c,2),h=o[0],f=o[1],Z=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var r,t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.Z.upload(n);case 3:if(r=e.sent,t=r.code,i=r.pic,0!==+t){e.next=10;break}return l.Z.success("\u4e0a\u4f20\u6210\u529f"),f([{url:i}]),e.abrupt("return",{url:i});case 10:l.Z.error("\u4e0a\u4f20\u5931\u8d25"),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:return f([]),e.abrupt("return",Promise.reject());case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(n){return e.apply(this,arguments)}}(),g=(0,u.useState)(n.name),k=(0,s.Z)(g,2),j=k[0],w=k[1],y=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=j.trim(),i="",Array.isArray(h)&&h.length>0&&(i=h[0].url),n&&i){e.next=5;break}return l.Z.error("\u59d3\u540d/\u5934\u50cf\u4e0d\u80fd\u4e3a\u7a7a"),e.abrupt("return");case 5:return e.prev=5,e.next=8,m.Z.updateUserInfo(n,i);case 8:if(s=e.sent,0===+s.code){e.next=13;break}return l.Z.error("\u4fee\u6539\u5931\u8d25"),e.abrupt("return");case 13:return e.next=15,r();case 15:l.Z.success("\u4fee\u6539\u6210\u529f"),t(-1),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(5);case 21:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(b,{children:[(0,x.jsx)(p.Z,{title:"\u4fee\u6539\u4fe1\u606f"}),(0,x.jsxs)("div",{className:"formBox",children:[(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"label",children:"\u5934\u50cf"}),(0,x.jsx)("div",{className:"input",children:(0,x.jsx)(d.wA,{maxCount:1,value:h,onDelete:function(){f([])},beforeUpload:function(e){return e.size>1048576?(l.Z.error("\u56fe\u7247\u4e0d\u80fd\u8d85\u8fc71MB"),null):e},upload:Z,showFailed:!1})})]}),(0,x.jsxs)("div",{className:"item",children:[(0,x.jsx)("div",{className:"label",children:"\u59d3\u540d"}),(0,x.jsx)("div",{className:"input",children:(0,x.jsx)(d.II,{placeholder:"\u8bf7\u8f93\u5165\u8d26\u53f7\u540d\u79f0",value:j,onChange:function(e){w(e)}})})]}),(0,x.jsx)(v.Z,{color:"primary",className:"submit",onClick:y,children:"\u63d0\u4ea4"})]})]})}))}}]);